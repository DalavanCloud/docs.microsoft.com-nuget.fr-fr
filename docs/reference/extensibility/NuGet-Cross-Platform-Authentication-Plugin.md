---
title: NuGet cross plug-in d’authentification de plateforme
description: NuGet cross plug-ins de plateforme d’authentification pour NuGet.exe, dotnet.exe, msbuild.exe et Visual Studio
author: nkolev92
ms.author: nikolev
ms.date: 07/01/2018
ms.topic: conceptual
ms.openlocfilehash: d80339eb81ade1cf2c323a604cc4fac06dcb1012
ms.sourcegitcommit: 09107c5092050f44a0c6abdfb21db73878f78bd0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/03/2018
ms.locfileid: "50981052"
---
# <a name="nuget-cross-platform-authentication-plugin"></a><span data-ttu-id="7baa9-103">NuGet cross plug-in d’authentification de plateforme</span><span class="sxs-lookup"><span data-stu-id="7baa9-103">NuGet cross platform authentication plugin</span></span>

<span data-ttu-id="7baa9-104">Dans la version 4.8 +, NuGet tous les clients (NuGet.exe, Visual Studio, dotnet.exe et MSBuild.exe) peuvent utiliser un plug-in d’authentification créé par-dessus la [NuGet entre les plug-ins de la plateforme](NuGet-Cross-Platform-Plugins.md) modèle.</span><span class="sxs-lookup"><span data-stu-id="7baa9-104">In version 4.8+, all NuGet clients (NuGet.exe, Visual Studio, dotnet.exe and MSBuild.exe) can use an authentication plugin built on top of the [NuGet cross platform plugins](NuGet-Cross-Platform-Plugins.md) model.</span></span>

## <a name="authentication-in-dotnetexe"></a><span data-ttu-id="7baa9-105">Authentification dans dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="7baa9-105">Authentication in dotnet.exe</span></span>

<span data-ttu-id="7baa9-106">Visual Studio et NuGet.exe sont par défaut interactive.</span><span class="sxs-lookup"><span data-stu-id="7baa9-106">Visual Studio and NuGet.exe are by default interactive.</span></span> <span data-ttu-id="7baa9-107">NuGet.exe contiendra un commutateur pour le rendre [non interactive](../../tools/nuget-exe-CLI-Reference.md).</span><span class="sxs-lookup"><span data-stu-id="7baa9-107">NuGet.exe contains a switch to make it [non interactive](../../tools/nuget-exe-CLI-Reference.md).</span></span>
<span data-ttu-id="7baa9-108">En outre, les plug-ins NuGet.exe et Visual Studio invitent l’utilisateur pour l’entrée.</span><span class="sxs-lookup"><span data-stu-id="7baa9-108">Additionally the NuGet.exe and Visual Studio plugins prompt the user for input.</span></span>
<span data-ttu-id="7baa9-109">Dans dotnet.exe il n’existe aucune invite et la valeur par défaut est non interactif.</span><span class="sxs-lookup"><span data-stu-id="7baa9-109">In dotnet.exe there is no prompting and the default is non interactive.</span></span>

<span data-ttu-id="7baa9-110">Le mécanisme d’authentification dans dotnet.exe est un flux de l’appareil.</span><span class="sxs-lookup"><span data-stu-id="7baa9-110">The authentication mechanism in dotnet.exe is device flow.</span></span> <span data-ttu-id="7baa9-111">Lors de la restauration ou ajouter l’opération de package est exécutée de manière interactive, les blocs de l’opération et les instructions à l’utilisateur comment à complète les authentifications doivent être fournies sur la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="7baa9-111">When the restore or add package operation is run interactively, the operation blocks and instructions to the user how to complete the authentications will be provided on the command line.</span></span>
<span data-ttu-id="7baa9-112">Lorsque l’utilisateur termine l’authentification de l’opération continue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-112">When the user completes the authentication the operation will continue.</span></span>

<span data-ttu-id="7baa9-113">Pour effectuer l’opération interactive, un doit passer `--interactive`.</span><span class="sxs-lookup"><span data-stu-id="7baa9-113">To make the operation interactive, one should pass `--interactive`.</span></span>
<span data-ttu-id="7baa9-114">Actuellement uniquement l’explicite `dotnet restore` et `dotnet add package` commandes prennent en charge un commutateur interactif.</span><span class="sxs-lookup"><span data-stu-id="7baa9-114">Currently only the explicit `dotnet restore` and `dotnet add package` commands support an interactive switch.</span></span>
<span data-ttu-id="7baa9-115">Il n’existe aucun commutateur interactive sur `dotnet build` et `dotnet publish`.</span><span class="sxs-lookup"><span data-stu-id="7baa9-115">There is no interactive switch on `dotnet build` and `dotnet publish`.</span></span>

## <a name="authentication-in-msbuild"></a><span data-ttu-id="7baa9-116">Authentification dans MSBuild</span><span class="sxs-lookup"><span data-stu-id="7baa9-116">Authentication in MSBuild</span></span>

<span data-ttu-id="7baa9-117">Semblable à dotnet.exe, MSBuild.exe par défaut est non qu'interactive, le mécanisme d’authentification MSBuild.exe est flux d’appareil.</span><span class="sxs-lookup"><span data-stu-id="7baa9-117">Similar to dotnet.exe, MSBuild.exe is by default non interactive the MSBuild.exe authentication mechanism is device flow.</span></span>
<span data-ttu-id="7baa9-118">Pour permettre la restauration interrompre et attendre que l’authentification, appelez la restauration avec `msbuild /t:restore /p:NuGetInteractive="true"`.</span><span class="sxs-lookup"><span data-stu-id="7baa9-118">To allow the restore to pause and wait for authentication, call restore with `msbuild /t:restore /p:NuGetInteractive="true"`.</span></span>

## <a name="creating-a-cross-platform-authentication-plugin"></a><span data-ttu-id="7baa9-119">Création d’un plug-in d’authentification d’inter-plateformes</span><span class="sxs-lookup"><span data-stu-id="7baa9-119">Creating a cross platform authentication plugin</span></span>

<span data-ttu-id="7baa9-120">Vous trouverez un exemple d’implémentation dans [plug-in du fournisseur d’informations d’identification Microsoft](https://github.com/Microsoft/artifacts-credprovider).</span><span class="sxs-lookup"><span data-stu-id="7baa9-120">A sample implementation can be found in [Microsoft Credential Provider plugin](https://github.com/Microsoft/artifacts-credprovider).</span></span>

<span data-ttu-id="7baa9-121">Il est très important que les plug-ins est conforme aux exigences de sécurité définies par les outils clients NuGet.</span><span class="sxs-lookup"><span data-stu-id="7baa9-121">It's very important that the plugins conforms to the security requirements set forth by the NuGet client tools.</span></span>
<span data-ttu-id="7baa9-122">Le minimum nécessaire est la version pour un plug-in être un plug-in d’authentification *2.0.0*.</span><span class="sxs-lookup"><span data-stu-id="7baa9-122">The minimum required version for a plugin to be an authentication plugin is *2.0.0*.</span></span>
<span data-ttu-id="7baa9-123">NuGet effectue la négociation avec le plug-in et la requête pour les revendications de l’opération prise en charge.</span><span class="sxs-lookup"><span data-stu-id="7baa9-123">NuGet will perform the handshake with the plugin and query for the supported operation claims.</span></span>
<span data-ttu-id="7baa9-124">Reportez-vous à NuGet entre plug-in de la plateforme [messages de protocole](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) pour plus d’informations sur les messages spécifiques.</span><span class="sxs-lookup"><span data-stu-id="7baa9-124">Please refer to the NuGet cross platform plugin [protocol messages](NuGet-Cross-Platform-Plugins.md#protocol-messages-index) for more details about the specific messages.</span></span>

<span data-ttu-id="7baa9-125">NuGet définit le niveau de journalisation et fournissent des informations de proxy pour le plug-in, le cas échéant.</span><span class="sxs-lookup"><span data-stu-id="7baa9-125">NuGet will set the log level and provide proxy information to the plugin when applicable.</span></span>
<span data-ttu-id="7baa9-126">Journalisation dans le package NuGet console n’est acceptable une fois que NuGet a défini le niveau de journalisation sur le plug-in.</span><span class="sxs-lookup"><span data-stu-id="7baa9-126">Logging to the NuGet console is only acceptable after NuGet has set the log level to the plugin.</span></span>

- <span data-ttu-id="7baa9-127">Comportement de .NET framework plug-in d’authentification</span><span class="sxs-lookup"><span data-stu-id="7baa9-127">.NET Framework plugin authentication behavior</span></span>

<span data-ttu-id="7baa9-128">Dans .NET Framework, les plug-ins sont autorisés à inviter un utilisateur pour l’entrée, sous la forme d’une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-128">In .NET Framework, the plugins are allowed to prompt a user for input, in the form of a dialog.</span></span>

- <span data-ttu-id="7baa9-129">Comportement de .NET core plug-in d’authentification</span><span class="sxs-lookup"><span data-stu-id="7baa9-129">.NET Core plugin authentication behavior</span></span>

<span data-ttu-id="7baa9-130">Dans .NET Core, une boîte de dialogue ne peut pas être affiché.</span><span class="sxs-lookup"><span data-stu-id="7baa9-130">In .NET Core, a dialog cannot be shown.</span></span> <span data-ttu-id="7baa9-131">Les plug-ins doivent utiliser des flux de l’appareil pour s’authentifier.</span><span class="sxs-lookup"><span data-stu-id="7baa9-131">The plugins should use device flow to authenticate.</span></span>
<span data-ttu-id="7baa9-132">Le plug-in peut envoyer des messages de journal à NuGet avec des instructions pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7baa9-132">The plugin can send log messages to NuGet with instructions to the user.</span></span>
<span data-ttu-id="7baa9-133">Notez que la journalisation est disponible une fois que le niveau de journal a été défini pour le plug-in.</span><span class="sxs-lookup"><span data-stu-id="7baa9-133">Note that logging is available after the log level has been set to the plugin.</span></span>
<span data-ttu-id="7baa9-134">NuGet ne prendra aucune entrée interactive à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="7baa9-134">NuGet will not take any interactive input from the command line.</span></span>

<span data-ttu-id="7baa9-135">Lorsque le client appelle le plug-in avec une authentification obtenir d’informations d’identification, les plug-ins doivent sont conformes au commutateur interactivité et respectent le commutateur de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-135">When the client calls the plugin with a Get Authentication Credentials, the plugins need to conform to the interactivity switch and respect the dialog switch.</span></span> 

<span data-ttu-id="7baa9-136">Le tableau suivant résume comment le plug-in doit se comporter pour toutes les combinaisons.</span><span class="sxs-lookup"><span data-stu-id="7baa9-136">The following table summarizes how the plugin should behave for all combinations.</span></span>

| <span data-ttu-id="7baa9-137">IsNonInteractive</span><span class="sxs-lookup"><span data-stu-id="7baa9-137">IsNonInteractive</span></span> | <span data-ttu-id="7baa9-138">CanShowDialog</span><span class="sxs-lookup"><span data-stu-id="7baa9-138">CanShowDialog</span></span> | <span data-ttu-id="7baa9-139">Comportement de plug-in</span><span class="sxs-lookup"><span data-stu-id="7baa9-139">Plugin behavior</span></span> |
| ---------------- | ------------- | --------------- |
| <span data-ttu-id="7baa9-140">true</span><span class="sxs-lookup"><span data-stu-id="7baa9-140">true</span></span> | <span data-ttu-id="7baa9-141">true</span><span class="sxs-lookup"><span data-stu-id="7baa9-141">true</span></span> | <span data-ttu-id="7baa9-142">Le commutateur IsNonInteractive est prioritaire sur le commutateur de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-142">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="7baa9-143">Le plug-in n’est pas autorisé à afficher une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-143">The plugin is not allowed to pop a dialog.</span></span> <span data-ttu-id="7baa9-144">Cette combinaison est valide uniquement pour les plug-ins de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="7baa9-144">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="7baa9-145">true</span><span class="sxs-lookup"><span data-stu-id="7baa9-145">true</span></span> | <span data-ttu-id="7baa9-146">False</span><span class="sxs-lookup"><span data-stu-id="7baa9-146">false</span></span> | <span data-ttu-id="7baa9-147">Le commutateur IsNonInteractive est prioritaire sur le commutateur de la boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-147">The IsNonInteractive switch takes precedence over the dialog switch.</span></span> <span data-ttu-id="7baa9-148">Le plug-in n’est pas autorisé à bloquer.</span><span class="sxs-lookup"><span data-stu-id="7baa9-148">The plugin is not allowed to block.</span></span> <span data-ttu-id="7baa9-149">Cette combinaison est uniquement valide pour plug-ins .NET Core</span><span class="sxs-lookup"><span data-stu-id="7baa9-149">This combination is only valid for .NET Core plugins</span></span> |
| <span data-ttu-id="7baa9-150">False</span><span class="sxs-lookup"><span data-stu-id="7baa9-150">false</span></span> | <span data-ttu-id="7baa9-151">true</span><span class="sxs-lookup"><span data-stu-id="7baa9-151">true</span></span> | <span data-ttu-id="7baa9-152">Le plug-in doit afficher une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-152">The plugin should show a dialog.</span></span> <span data-ttu-id="7baa9-153">Cette combinaison est valide uniquement pour les plug-ins de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="7baa9-153">This combination is only valid for .NET Framework plugins</span></span> |
| <span data-ttu-id="7baa9-154">False</span><span class="sxs-lookup"><span data-stu-id="7baa9-154">false</span></span> | <span data-ttu-id="7baa9-155">False</span><span class="sxs-lookup"><span data-stu-id="7baa9-155">false</span></span> | <span data-ttu-id="7baa9-156">Le plug-in doit/peut pas afficher une boîte de dialogue.</span><span class="sxs-lookup"><span data-stu-id="7baa9-156">The plugin should/can not show a dialog.</span></span> <span data-ttu-id="7baa9-157">Le plug-in doit utiliser des flux de l’appareil pour l’authentification en se connectant à un message d’instruction par le biais de l’enregistreur d’événements.</span><span class="sxs-lookup"><span data-stu-id="7baa9-157">The plugin should use device flow to authenticate by logging an instruction message via the logger.</span></span> <span data-ttu-id="7baa9-158">Cette combinaison est uniquement valide pour plug-ins .NET Core</span><span class="sxs-lookup"><span data-stu-id="7baa9-158">This combination is only valid for .NET Core plugins</span></span> |

<span data-ttu-id="7baa9-159">Avant d’écrire un plug-in, consultez les spécifications suivantes.</span><span class="sxs-lookup"><span data-stu-id="7baa9-159">Please refer to the following specs before writing a plugin.</span></span>

- [<span data-ttu-id="7baa9-160">Plug-in de téléchargement de Package NuGet</span><span class="sxs-lookup"><span data-stu-id="7baa9-160">NuGet Package Download Plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-Package-Download-Plugin)
- [<span data-ttu-id="7baa9-161">NuGet cross plat plug-in d’authentification</span><span class="sxs-lookup"><span data-stu-id="7baa9-161">NuGet cross plat authentication plugin</span></span>](https://github.com/NuGet/Home/wiki/NuGet-cross-plat-authentication-plugin)
