---
title: Restauration des packages NuGet
description: Vue d’ensemble décrivant comment NuGet restaure les packages dont dépend un projet (notamment les procédures de désactivation de la restauration et de restriction des versions).
author: karann-msft
ms.author: karann
ms.date: 03/16/2018
ms.topic: conceptual
ms.openlocfilehash: da69181aebe3bebcea6acd6e15fde6b77dd33452
ms.sourcegitcommit: ffbdf147f84f8bd60495d3288dff9a5275491c17
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/13/2018
ms.locfileid: "51580296"
---
# <a name="package-restore"></a><span data-ttu-id="9fb67-103">Restauration des packages</span><span class="sxs-lookup"><span data-stu-id="9fb67-103">Package Restore</span></span>

<span data-ttu-id="9fb67-104">Pour promouvoir un environnement de développement plus propre et réduire la taille du référentiel, la fonctionnalité de **restauration de package** de NuGet installe toutes les dépendances d’un projet telles qu’elles sont listées dans le fichier projet ou `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-104">To promote a cleaner development environment and to reduce repository size, NuGet **Package Restore** installs all a project's dependencies as listed in either the project file or `packages.config`.</span></span> <span data-ttu-id="9fb67-105">Visual Studio peut restaurer les packages automatiquement à la génération d’un projet.</span><span class="sxs-lookup"><span data-stu-id="9fb67-105">Visual Studio can restore packages automatically when a project is built.</span></span> <span data-ttu-id="9fb67-106">Les commandes `dotnet build` et `dotnet run` (.NET Core 2.0+) effectuent également une restauration automatique.</span><span class="sxs-lookup"><span data-stu-id="9fb67-106">The `dotnet build` and `dotnet run` commands (.NET Core 2.0+) also perform an automatic restore.</span></span> <span data-ttu-id="9fb67-107">Vous pouvez aussi restaurer les packages à tout moment avec Visual Studio, `nuget restore`, `dotnet restore` et xbuild sur Mono.</span><span class="sxs-lookup"><span data-stu-id="9fb67-107">You can also restore packages at any time through Visual Studio, `nuget restore`, `dotnet restore`, and xbuild on Mono.</span></span>

<span data-ttu-id="9fb67-108">La restauration de package permet de garantir la disponibilité de toutes les dépendances d’un projet sans stocker les packages dans le contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="9fb67-108">Package restore makes sure that all a project's dependencies are available without storing those packages in source control.</span></span> <span data-ttu-id="9fb67-109">Consultez la page [Packages et contrôle de code source](../consume-packages/packages-and-source-control.md) pour savoir comment configurer votre référentiel de façon à exclure les binaires des packages.</span><span class="sxs-lookup"><span data-stu-id="9fb67-109">See [Packages and Source Control](../consume-packages/packages-and-source-control.md) on how to configure your repository to exclude package binaries.</span></span>

## <a name="package-restore-overview"></a><span data-ttu-id="9fb67-110">Présentation de la restauration de package</span><span class="sxs-lookup"><span data-stu-id="9fb67-110">Package restore overview</span></span>

<span data-ttu-id="9fb67-111">La restauration de package installe tout d’abord les dépendances directes nécessaires d’un projet, puis toutes les dépendances du graphique de dépendance de ces packages.</span><span class="sxs-lookup"><span data-stu-id="9fb67-111">Restoring packages first installs the direct dependencies of a project as needed, then installs any dependencies of those packages throughout the entire dependency graph.</span></span>

<span data-ttu-id="9fb67-112">Si un package n’est pas déjà installé, NuGet essaie d’abord de le récupérer à partir du [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-112">If a package is not already installed, NuGet first attempts to retrieve it from the [cache](../consume-packages/managing-the-global-packages-and-cache-folders.md).</span></span> <span data-ttu-id="9fb67-113">Si le package ne se trouve pas dans le cache, NuGet tente de le télécharger à partir de toute les sources activées (consultez la page [Configurer le comportement de NuGet](Configuring-NuGet-Behavior.md) ; les sources apparaissent également dans la liste **Outils > Options > Gestionnaire de package NuGet > Sources de packages** dans Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="9fb67-113">If the package is not in the cache, NuGet then attempts to download the package from all enabled sources (see [Configuring NuGet behavior](Configuring-NuGet-Behavior.md); sources also appear in the  **Tools > Options > NuGet Package Manager > Package Sources** list in Visual Studio).</span></span> <span data-ttu-id="9fb67-114">Lors de la restauration, NuGet ignore l’ordre des sources de packages et utilise le package provenant de la première source à répondre aux requêtes.</span><span class="sxs-lookup"><span data-stu-id="9fb67-114">During restore, NuGet ignores the order of package sources, using the package from whichever source is first to respond to requests.</span></span>

> [!Note]
> <span data-ttu-id="9fb67-115">NuGet n’indique pas l’échec de la restauration d’un package tant que toutes les sources n’ont pas été vérifiées.</span><span class="sxs-lookup"><span data-stu-id="9fb67-115">NuGet does not indicate a failure to restore a package until all the sources have been checked.</span></span> <span data-ttu-id="9fb67-116">À ce stade, NuGet ne signale de défaillance que pour la dernière source de la liste.</span><span class="sxs-lookup"><span data-stu-id="9fb67-116">At that time, NuGet reports a failure for only the last source in the list.</span></span> <span data-ttu-id="9fb67-117">L’erreur implique que le package ne se trouvait dans *aucune* autre source, même si les erreurs ne sont pas affichées pour chacune de ces sources.</span><span class="sxs-lookup"><span data-stu-id="9fb67-117">The error implies that the package wasn't present on *any* of the other sources, even though errors are not shown for each of those sources individually.</span></span>

<span data-ttu-id="9fb67-118">La restauration du package est déclenchée comme suit :</span><span class="sxs-lookup"><span data-stu-id="9fb67-118">Package restore is triggered in the following ways:</span></span>

- <span data-ttu-id="9fb67-119">**Interface CLI dotnet** : utilisez la commande [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x), qui restaure les packages répertoriés dans le fichier projet (consultez [PackageReference](../consume-packages/package-references-in-project-files.md)).</span><span class="sxs-lookup"><span data-stu-id="9fb67-119">**dotnet CLI**: use the [dotnet restore](/dotnet/core/tools/dotnet-restore?tabs=netcore2x) command, which restores packages listed in the project file (see [PackageReference](../consume-packages/package-references-in-project-files.md)).</span></span> <span data-ttu-id="9fb67-120">Avec .NET Core 2.0 et versions ultérieures, la restauration est effectuée automatiquement avec `dotnet build` et `dotnet run`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-120">With .NET Core 2.0 and later, restore is done automatically with `dotnet build` and `dotnet run`.</span></span>

- <span data-ttu-id="9fb67-121">**Interface utilisateur du Gestionnaire de package (Visual Studio sous Windows)** : les packages sont automatiquement restaurés lors de la création d’un projet à partir d’un modèle et lors de la création d’un projet (selon l’option décrite dans [Activation et désactivation de la restauration des packages](#enabling-and-disabling-package-restore)).</span><span class="sxs-lookup"><span data-stu-id="9fb67-121">**Package Manager UI (Visual Studio on Windows)**: Packages are restored automatically when creating a project from a template and when building a project (subject to the option described in [Enabling and disabling package restore](#enabling-and-disabling-package-restore)).</span></span> <span data-ttu-id="9fb67-122">Dans NuGet 4.0+, la restauration se produit également automatiquement lorsque des modifications sont apportées à un projet basé sur le kit SDK .NET Core.</span><span class="sxs-lookup"><span data-stu-id="9fb67-122">In NuGet 4.0+, restore also happens automatically when changes are made to a .NET Core SDK-based project.</span></span>

    <span data-ttu-id="9fb67-123">Pour effectuer une restauration manuelle, cliquez avec le bouton droit sur la solution dans l’Explorateur de solutions puis sélectionnez **Restaurer des packages NuGet**.</span><span class="sxs-lookup"><span data-stu-id="9fb67-123">To restore manually, right-click the solution in Solution Explorer and select **Restore NuGet Packages**.</span></span> <span data-ttu-id="9fb67-124">Si un ou plusieurs packages individuels ne sont toujours pas installés correctement (comme en témoigne une icône d’erreur dans l’Explorateur de solutions), utilisez l’interface utilisateur du Gestionnaire de package pour désinstaller puis réinstaller les packages affectés.</span><span class="sxs-lookup"><span data-stu-id="9fb67-124">If one or more individual packages are still not installed properly (meaning that Solution Explorer shows an error icon), then use the Package Manager UI to uninstall and reinstall the affected packages.</span></span> <span data-ttu-id="9fb67-125">Consultez [Réinstallation et mise à jour des packages](../consume-packages/reinstalling-and-updating-packages.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-125">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md)</span></span>

    <span data-ttu-id="9fb67-126">Si vous voyez l’erreur « Ce projet fait référence à des packages NuGet qui sont manquants sur cet ordinateur » ou l’erreur « Un ou plusieurs packages NuGet doivent être restaurés mais n’ont pas pu l’être, car le consentement n’a pas été octroyé », activez la restauration automatique en suivant les instructions de la section [Activation et désactivation de la restauration des packages](#enabling-and-disabling-package-restore).</span><span class="sxs-lookup"><span data-stu-id="9fb67-126">If you see the error "This project references NuGet package(s) that are missing on this computer" or "One or more NuGet packages need to be restored but couldn't be because consent has not been granted," turn on automatic restore by following the instructions under [Enabling and disabling package restore](#enabling-and-disabling-package-restore).</span></span> <span data-ttu-id="9fb67-127">Consultez également la page [Résolution des problèmes de restauration de package](Package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-127">Also see [Package restore troubleshooting](Package-restore-troubleshooting.md).</span></span>

- <span data-ttu-id="9fb67-128">**Interface CLI NuGet** : utilisez la commande [nuget restore](../tools/cli-ref-restore.md), qui restaure les packages listés dans le fichier projet ou dans `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-128">**NuGet CLI**: use the [nuget restore](../tools/cli-ref-restore.md) command, which restores packages listed in the project file or in `packages.config`.</span></span> <span data-ttu-id="9fb67-129">Vous pouvez également spécifier un fichier solution.</span><span class="sxs-lookup"><span data-stu-id="9fb67-129">You can also specify a solution file.</span></span>

- <span data-ttu-id="9fb67-130">**MSBuild** : utilisez la commande [msbuild /t:restore](../reference/msbuild-targets.md#restore-target), qui restaure les packages listés dans le fichier projet (PackageReference uniquement).</span><span class="sxs-lookup"><span data-stu-id="9fb67-130">**MSBuild**: use the [msbuild /t:restore](../reference/msbuild-targets.md#restore-target) command, which restores packages packages listed in the project file (PackageReference only).</span></span> <span data-ttu-id="9fb67-131">Disponible uniquement dans NuGet 4.x+ et MSBuild 15.1+, inclus avec Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="9fb67-131">Available only in NuGet 4.x+ and MSBuild 15.1+, which are included with Visual Studio 2017.</span></span> <span data-ttu-id="9fb67-132">`nuget restore` et `dotnet restore` utilisent cette commande pour les projets applicables.</span><span class="sxs-lookup"><span data-stu-id="9fb67-132">`nuget restore` and `dotnet restore` both use this command for applicable projects.</span></span>

- <span data-ttu-id="9fb67-133">**Visual Studio Team Services** : lorsque vous créez une définition de build dans Team Services, incluez la tâche [Restauration NuGet](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) ou [Restauration .NET Core](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) avant de procéder à toute tâche de génération.</span><span class="sxs-lookup"><span data-stu-id="9fb67-133">**Visual Studio Team Services**: When creating a build definition on Team Services, include the [NuGet restore](/vsts/build-release/tasks/package/nuget#restore-nuget-packages) or [.NET Core Restore](/vsts/build-release/tasks/build/dotnet-core#restore-nuget-packages) task in the definition before any build task.</span></span> <span data-ttu-id="9fb67-134">Cette tâche est incluse par défaut dans plusieurs modèles de build.</span><span class="sxs-lookup"><span data-stu-id="9fb67-134">This task is included by default in a number of build templates.</span></span>

- <span data-ttu-id="9fb67-135">**Team Foundation Server** : TFS 2013 et versions ultérieures restaure automatiquement les packages lors de la génération, sous réserve que vous utilisiez un modèle Team Build pour TFS 2013 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="9fb67-135">**Team Foundation Server**: TFS 2013 and later automatically restores packages during build, provided that you're using a Team Build Template for TFS 2013 or later.</span></span> <span data-ttu-id="9fb67-136">Pour les versions antérieures de TFS, vous pouvez inclure une étape de génération destinée à appeler une des options de restauration en ligne de commande ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="9fb67-136">For earlier version of TFS, you can include a build step to invoke one of the command-line restore options above.</span></span> <span data-ttu-id="9fb67-137">Vous pouvez éventuellement migrer le modèle de build vers TFS 2013.</span><span class="sxs-lookup"><span data-stu-id="9fb67-137">You can optionally migrate the build template to TFS 2013.</span></span> <span data-ttu-id="9fb67-138">Pour plus d’informations, consultez [Procédure pas à pas pour la restauration des packages avec Team Foundation Build](../consume-packages/team-foundation-build.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-138">For more information, see the [Walkthrough of package restore with Team Foundation Build](../consume-packages/team-foundation-build.md).</span></span>

## <a name="enabling-and-disabling-package-restore"></a><span data-ttu-id="9fb67-139">Activation et désactivation de la restauration des packages</span><span class="sxs-lookup"><span data-stu-id="9fb67-139">Enabling and disabling package restore</span></span>

<span data-ttu-id="9fb67-140">La restauration du package est généralement activée via **Outils > Options > Gestionnaire de package NuGet** dans Visual Studio :</span><span class="sxs-lookup"><span data-stu-id="9fb67-140">Package restore is primarily enabled through **Tools > Options > NuGet Package Manager** in Visual Studio:</span></span>

![Contrôle du comportement de la restauration de package via les options du gestionnaire de package NuGet](media/Restore-01-AutoRestoreOptions.png)

- <span data-ttu-id="9fb67-142">**Autoriser NuGet à télécharger les packages manquants** : contrôle toutes les formes de restauration de package en changeant la valeur du paramètre `packageRestore/enabled` dans le fichier `NuGet.Config`, comme indiqué ci-dessous (`%AppData%\NuGet\NuGet.Config` sur Windows, `~/.nuget/NuGet/NuGet.Config` sur Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="9fb67-142">**Allow NuGet to download missing packages**: controls all forms of package restore by changing the `packageRestore/enabled` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="9fb67-143">Dans Visual Studio, ce paramètre permet à la commande **Restaurer les packages NuGet** figurant dans le menu contextuel de la solution de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="9fb67-143">In Visual Studio, this setting allows the **Restore NuGet Packages** command on the solution's context menu to work.</span></span>

    ```xml
    <configuration>
        <packageRestore>
            <!-- The 'enabled' key is True when the "Allow NuGet to download missing packages" checkbox is set.
                 Clearing the box sets this to False, disabling command-line, automatic, and MSBuild-Integrated restore. -->
            <add key="enabled" value="True" />
        </packageRestore>
    </configuration>
    ```

> [!Note]
>  <span data-ttu-id="9fb67-144">Le paramètre `packageRestore/enabled` peut être remplacé globalement en définissant une variable d’environnement appelée **EnableNuGetPackageRestore** sur la valeur TRUE ou FALSE, avant le lancement de Visual Studio ou le démarrage d’une génération.</span><span class="sxs-lookup"><span data-stu-id="9fb67-144">The `packageRestore/enabled` setting can be overridden globally by setting an environment variable called **EnableNuGetPackageRestore** with a value of TRUE or FALSE before launching Visual Studio or starting a build.</span></span>

- <span data-ttu-id="9fb67-145">**Rechercher automatiquement les packages manquants pendant la génération dans Visual Studio** : contrôle la restauration automatique en changeant la valeur du paramètre `packageRestore/automatic` dans le fichier `NuGet.Config`, comme indiqué ci-dessous (`%AppData%\NuGet\NuGet.Config` sur Windows, `~/.nuget/NuGet/NuGet.Config` sur Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="9fb67-145">**Automatically check for missing packages during build in Visual Studio**: controls automatic restore by changing the `packageRestore/automatic` setting in the `NuGet.Config` file as shown below (`%AppData%\NuGet\NuGet.Config` on Windows, `~/.nuget/NuGet/NuGet.Config` on Mac/Linux).</span></span> <span data-ttu-id="9fb67-146">Quand cette option est définie, l’exécution d’une build à partir de Visual Studio restaure automatiquement tous les packages manquants.</span><span class="sxs-lookup"><span data-stu-id="9fb67-146">When this option is set, running a build from Visual Studio automatically restores any missing packages.</span></span> <span data-ttu-id="9fb67-147">L’option n’affecte pas les builds exécutées à partir de la ligne de commande avec MSBuild.</span><span class="sxs-lookup"><span data-stu-id="9fb67-147">The option does not affect builds run from the command line using MSBuild.</span></span>

    ```xml
    ...
    <configuration>
        <packageRestore>
            <!-- The 'automatic' key is set to True when the "Automatically check for missing packages during
                 build in Visual Studio" checkbox is set. Clearing the box sets this to False and disables
                 automatic restore. -->
            <add key="automatic" value="True" />
        </packageRestore>
    </configuration>
    ```

<span data-ttu-id="9fb67-148">Pour référence, consultez [Fichier config NuGet - Section packageRestore](../reference/nuget-config-file.md#packagerestore-section).</span><span class="sxs-lookup"><span data-stu-id="9fb67-148">For reference, see the [NuGet config file - packageRestore section](../reference/nuget-config-file.md#packagerestore-section).</span></span>

<span data-ttu-id="9fb67-149">Dans certains cas, un développeur ou une société peuvent vouloir activer ou désactiver la restauration de package pour tous les utilisateurs d’un ordinateur.</span><span class="sxs-lookup"><span data-stu-id="9fb67-149">In some cases, a developer or company might want to enable or disable package restore for all users on a computer.</span></span> <span data-ttu-id="9fb67-150">Pour cela, ajoutez les paramètres ci-dessus au fichier de configuration NuGet global situé dans `%ProgramData%\NuGet\Config` (Windows, potentiellement sous un dossier `\{IDE}\{Version}\{SKU}\` propre à Visual Studio) ou `~/.local/share` (Mac/Linux).</span><span class="sxs-lookup"><span data-stu-id="9fb67-150">To do this, add the same settings above to the global NuGet configuration file located in `%ProgramData%\NuGet\Config` (Windows, potentially under a specific `\{IDE}\{Version}\{SKU}\` folder for Visual Studio) or `~/.local/share` (Mac/Linux).</span></span> <span data-ttu-id="9fb67-151">Chaque utilisateur peut ensuite activer la restauration au niveau d’un projet, si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="9fb67-151">Individual users can then selectively enable restore as needed on a project level.</span></span> <span data-ttu-id="9fb67-152">Pour plus d’informations sur la façon dont NuGet hiérarchise les fichiers de configuration, consultez [Configuration du comportement de NuGet](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied).</span><span class="sxs-lookup"><span data-stu-id="9fb67-152">See [Configuring NuGet behavior](../consume-packages/configuring-nuget-behavior.md#how-settings-are-applied) for exact details on how NuGet prioritizes multiple config files.</span></span>

> [!Important]
> <span data-ttu-id="9fb67-153">Si vous modifiez les paramètres `packageRestore` directement dans `nuget.config`, redémarrez Visual Studio pour que la boîte de dialogue des options affiche les valeurs actuelles.</span><span class="sxs-lookup"><span data-stu-id="9fb67-153">If you edit the `packageRestore` settings directly in `nuget.config`, restart Visual Studio so that the options dialog box shows the current values.</span></span>

## <a name="constraining-package-versions-with-restore"></a><span data-ttu-id="9fb67-154">Restriction des versions de package avec la restauration</span><span class="sxs-lookup"><span data-stu-id="9fb67-154">Constraining package versions with restore</span></span>

<span data-ttu-id="9fb67-155">Lors de la restauration des packages avec l’une des méthodes disponibles, NuGet respecte toutes les restrictions spécifiées dans `packages.config` ou le fichier projet :</span><span class="sxs-lookup"><span data-stu-id="9fb67-155">When restoring packages through any method, NuGet honors any constraints specified in `packages.config` or the project file:</span></span>

- <span data-ttu-id="9fb67-156">`packages.config` : permet de spécifier une plage de versions dans la propriété `allowedVersion` de la dépendance.</span><span class="sxs-lookup"><span data-stu-id="9fb67-156">`packages.config`: Specify a version range in the `allowedVersion` property of the dependency.</span></span> <span data-ttu-id="9fb67-157">Consultez [Réinstallation et mise à jour des packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span><span class="sxs-lookup"><span data-stu-id="9fb67-157">See [Reinstalling and updating packages](../consume-packages/reinstalling-and-updating-packages.md#constraining-upgrade-versions).</span></span> <span data-ttu-id="9fb67-158">Exemple :</span><span class="sxs-lookup"><span data-stu-id="9fb67-158">For example:</span></span>

    ```xml
    <package id="Newtonsoft.json" version="6.0.4" allowedVersions="[6,7)" />
    ```

- <span data-ttu-id="9fb67-159">Fichier projet (PackageReference) : permet de spécifier une plage de versions directement avec le numéro de version de la dépendance.</span><span class="sxs-lookup"><span data-stu-id="9fb67-159">Project file (PackageReference): Specify a version range directly with the dependency's version number.</span></span> <span data-ttu-id="9fb67-160">Exemple :</span><span class="sxs-lookup"><span data-stu-id="9fb67-160">For example:</span></span>

    ```xml
    <PackageReference Include="Newtonsoft.json" Version="[6, 7)" />
    ```

<span data-ttu-id="9fb67-161">Dans tous les cas, utilisez la notation décrite dans [Gestion des versions du package](../reference/package-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-161">In all cases, use the notation described in [Package versioning](../reference/package-versioning.md).</span></span>

## <a name="forcing-restore-from-package-sources"></a><span data-ttu-id="9fb67-162">Forcer la restauration à partir de sources de packages</span><span class="sxs-lookup"><span data-stu-id="9fb67-162">Forcing restore from package sources</span></span>

<span data-ttu-id="9fb67-163">Par défaut, les opérations de restauration NuGet utilisent des packages provenant des dossiers *global-packages* et *http-cache*, décrits sur la page [Gérer les dossiers de packages globaux et de cache](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-163">By default, NuGet restore operations use packages from the *global-packages* and *http-cache* folders, which are described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

<span data-ttu-id="9fb67-164">Pour éviter d’utiliser le dossier *global-packages*, effectuez l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="9fb67-164">To avoid using the *global-packages* folder, do one of the following:</span></span>

- <span data-ttu-id="9fb67-165">Effacez le dossier avec `nuget locals global-packages -clear` ou `dotnet nuget locals global-packages --clear`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-165">Clear the folder using `nuget locals global-packages -clear` or `dotnet nuget locals global-packages --clear`</span></span>
- <span data-ttu-id="9fb67-166">Modifiez temporairement l’emplacement du dossier *global-packages* avant l’opération de restauration en suivant l’une des méthodes ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="9fb67-166">Temporarily change the location of the *global-packages* folder before the restore operation using one of the following methods:</span></span>
  - <span data-ttu-id="9fb67-167">Définissez la variable d’environnement NUGET_PACKAGES sur un autre dossier.</span><span class="sxs-lookup"><span data-stu-id="9fb67-167">Set the NUGET_PACKAGES environment variable to a different folder.</span></span>
  - <span data-ttu-id="9fb67-168">Créez un fichier `NuGet.Config` qui définit `globalPackagesFolder` (si vous utilisez PackageReference) ou `repositoryPath` (si vous utilisez `packages.config`) sur un autre dossier (consultez les [paramètres de configuration](../reference/nuget-config-file.md#config-section)).</span><span class="sxs-lookup"><span data-stu-id="9fb67-168">Create a `NuGet.Config` file that sets `globalPackagesFolder` (if using PackageReference) or `repositoryPath` (if using `packages.config`) to a different folder (see [configuration settings](../reference/nuget-config-file.md#config-section)</span></span>
  - <span data-ttu-id="9fb67-169">MSBuild uniquement : spécifiez un autre dossier avec la propriété `RestorePackagesPath`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-169">MSBuild only: specify a different folder with the `RestorePackagesPath` property.</span></span>

<span data-ttu-id="9fb67-170">Pour éviter d’utiliser le cache pour les sources HTTP, effectuez l’une des opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="9fb67-170">To avoid using the cache for HTTP sources, do one of the following:</span></span>

- <span data-ttu-id="9fb67-171">Utilisez l’option `-NoCache` avec `nuget restore` ou l’option `--no-cache` avec `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-171">Use the `-NoCache` option with `nuget restore` or the `--no-cache` option with `dotnet restore`.</span></span> <span data-ttu-id="9fb67-172">Elles n’affectent pas les opérations de restauration effectuées par le biais de la console ou de l’interface utilisateur du Gestionnaire de package de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9fb67-172">These options do not affect restore operations through the Visual Studio Package Manager UI or Console.</span></span>
- <span data-ttu-id="9fb67-173">Effacez le cache avec `nuget locals http-cache -clear` ou `dotnet nuget locals http-cache --clear`.</span><span class="sxs-lookup"><span data-stu-id="9fb67-173">Clear the cache using `nuget locals http-cache -clear` or `dotnet nuget locals http-cache --clear`.</span></span>
- <span data-ttu-id="9fb67-174">Définissez temporairement la variable d’environnement NUGET_HTTP_CACHE_PATH sur un autre dossier.</span><span class="sxs-lookup"><span data-stu-id="9fb67-174">Temporarily set of the NUGET_HTTP_CACHE_PATH environment variable to a different folder.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="9fb67-175">Résolution des problèmes</span><span class="sxs-lookup"><span data-stu-id="9fb67-175">Troubleshooting</span></span>

<span data-ttu-id="9fb67-176">Consultez [Résolution des erreurs de restauration](package-restore-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="9fb67-176">See [Troubleshooting package restore](package-restore-troubleshooting.md).</span></span>
