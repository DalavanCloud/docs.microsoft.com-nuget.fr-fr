---
title: Méthodes d’installation des packages NuGet
description: Décrit le processus d’installation des packages NuGet dans un projet, y compris les opérations sur le disque et dans les fichiers projet applicables.
author: karann-msft
ms.author: karann
ms.date: 02/12/2018
ms.topic: overview
ms.openlocfilehash: 955cbdb6766152fd793ed3604cf599987e9805e0
ms.sourcegitcommit: 673e580ae749544a4a071b4efe7d42fd2bb6d209
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/06/2018
ms.locfileid: "52977548"
---
# <a name="different-ways-to-install-a-nuget-package"></a><span data-ttu-id="2ce2a-103">Différentes méthodes d’installer un package NuGet</span><span class="sxs-lookup"><span data-stu-id="2ce2a-103">Different ways to install a NuGet Package</span></span>

<span data-ttu-id="2ce2a-104">Les packages NuGet se téléchargent et s’installent suivant les méthodes du tableau ci-dessous (consultez la page [Installer des outils clients NuGet](../install-nuget-client-tools.md) s’ils ne sont pas déjà installés).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-104">NuGet packages are downloaded and installed using any of the methods in the following table (see [Install NuGet client tools](../install-nuget-client-tools.md) if you don't have these installed already).</span></span> <span data-ttu-id="2ce2a-105">Il est possible de les récupérer dans un cache plutôt que de les télécharger.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-105">The package may be retrieved from a cache instead of downloaded.</span></span>

| <span data-ttu-id="2ce2a-106">Méthode</span><span class="sxs-lookup"><span data-stu-id="2ce2a-106">Method</span></span> | <span data-ttu-id="2ce2a-107">Description</span><span class="sxs-lookup"><span data-stu-id="2ce2a-107">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2ce2a-108">Interface CLI de dotnet.exe</span><span class="sxs-lookup"><span data-stu-id="2ce2a-108">dotnet.exe CLI</span></span><br/>`dotnet add package <package_name>` | <span data-ttu-id="2ce2a-109">(Toutes les plateformes) Récupère le package identifié par \<package_name\> et développe son contenu dans un dossier du répertoire actif, puis ajoute une référence au fichier projet.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-109">(All platforms) Retrieves the package identified by \<package_name\>, expands its contents into a folder in the current directory, and adds a reference to the project file.</span></span> <span data-ttu-id="2ce2a-110">Récupère et installe également les dépendances.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-110">Also retrieves and installs dependencies.</span></span><ul><li>[<span data-ttu-id="2ce2a-111">Installer et utiliser un package (interface CLI dotnet)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-111">Install and use a package (dotnet CLI)</span></span>](../quickstart/install-and-use-a-package-using-the-dotnet-cli.md)</li><li>[<span data-ttu-id="2ce2a-112">Commande dotnet add package</span><span class="sxs-lookup"><span data-stu-id="2ce2a-112">dotnet add package command</span></span>](/dotnet/core/tools/dotnet-add-package)</li></ul> |
| <span data-ttu-id="2ce2a-113">Interface utilisateur du Gestionnaire de package (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-113">Package Manager UI (Visual Studio)</span></span> | <span data-ttu-id="2ce2a-114">(Windows et Mac) Fournit une interface utilisateur permettant de parcourir, de sélectionner et d’installer des packages et leurs dépendances dans un projet à partir d’une source de package donnée.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-114">(Windows and Mac) Provides a UI through which you can browse, select, and install packages and their dependencies into a project from a specified package source.</span></span> <span data-ttu-id="2ce2a-115">Ajoute des références aux packages installés dans le fichier projet.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-115">Adds references to installed packages to the project file.</span></span><ul><li>[<span data-ttu-id="2ce2a-116">Installer et utiliser un package (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-116">Install and use a package (Visual Studio)</span></span>](../quickstart/install-and-use-a-package-in-visual-studio.md)</li><li>[<span data-ttu-id="2ce2a-117">Informations de référence sur l’interface utilisateur du Gestionnaire de package (Windows)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-117">Package Manager UI reference (Windows)</span></span>](../tools/package-manager-ui.md)</li><li>[<span data-ttu-id="2ce2a-118">Inclusion d’un package NuGet dans votre projet (Mac)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-118">Including a NuGet package in your project (Mac)</span></span>](/visualstudio/mac/nuget-walkthrough)</li></ul> |
| <span data-ttu-id="2ce2a-119">Console du Gestionnaire de package (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-119">Package Manager Console (Visual Studio)</span></span><br/>`Install-Package <package_name>` | <span data-ttu-id="2ce2a-120">(Windows uniquement) Récupère et installe le package identifié par \<package_name\> dans un projet spécifié au sein de la solution à partir d’une source donnée, puis ajoute une référence au fichier projet.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-120">(Windows only) Retrieves and installs the package identified by \<package_name\> from a selected source into a specified project in the solution, then adds a reference to the project file.</span></span> <span data-ttu-id="2ce2a-121">Récupère et installe également les dépendances.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-121">Also retrieves and installs dependencies.</span></span><ul><li>[<span data-ttu-id="2ce2a-122">Installer et utiliser un package (Visual Studio)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-122">Install and use a package (Visual Studio)</span></span>](../quickstart/install-and-use-a-package-in-visual-studio.md)</li><li>[<span data-ttu-id="2ce2a-123">Guide de la console du Gestionnaire de package</span><span class="sxs-lookup"><span data-stu-id="2ce2a-123">Package Manager Console guide</span></span>](../tools/package-manager-console.md)</li></ul> |
| <span data-ttu-id="2ce2a-124">Interface CLI de nuget.exe</span><span class="sxs-lookup"><span data-stu-id="2ce2a-124">nuget.exe CLI</span></span><br/>`nuget install <package_name>` | <span data-ttu-id="2ce2a-125">(Toutes les plateformes) Récupère le package identifié par \<package_name\> et développe son contenu dans un dossier du répertoire actif ; peut également récupérer tous les packages listés dans un fichier `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-125">(All platforms) Retrieves the package identified by \<package_name\> and expands its contents into a folder in the current directory; can also retrieve all packages listed in a `packages.config` file.</span></span> <span data-ttu-id="2ce2a-126">Récupère et installe également les dépendances, mais n’apporte aucune modification aux fichiers projet ni à `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-126">Also retrieves and installs dependencies, but makes no changes to project files or `packages.config`.</span></span><ul><li>[<span data-ttu-id="2ce2a-127">commande d’installation</span><span class="sxs-lookup"><span data-stu-id="2ce2a-127">install command</span></span>](../tools/cli-ref-install.md)</li></ul> |

## <a name="what-happens-when-a-package-is-installed"></a><span data-ttu-id="2ce2a-128">Processus d’installation d’un package</span><span class="sxs-lookup"><span data-stu-id="2ce2a-128">What happens when a package is installed</span></span>

<span data-ttu-id="2ce2a-129">En termes simples, les différents outils NuGet créent généralement une référence à un package dans le fichier projet ou `packages.config`, puis effectuent une restauration de package, ce qui installe le package proprement dit.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-129">Simply said, the different NuGet tools typically create a reference to a package in the project file or `packages.config`, then perform a package restore, which effectively installs the package.</span></span> <span data-ttu-id="2ce2a-130">`nuget install` fait figure d’exception : il développe simplement le package dans un dossier `packages`, sans modifier les autres fichiers.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-130">The exception is `nuget install`, which only expands the package into a `packages` folder and does not modify any other files.</span></span>

<span data-ttu-id="2ce2a-131">Le processus général se décompose ainsi :</span><span class="sxs-lookup"><span data-stu-id="2ce2a-131">The general process is as follows:</span></span>

1. <span data-ttu-id="2ce2a-132">(Tous les outils à l’exception de `nuget.exe`) Enregistrez la version et l’identificateur de package dans le fichier projet ou `packages.config`.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-132">(All tools except `nuget.exe`) Record the package identifer and version into the project file or `packages.config`.</span></span>

2. <span data-ttu-id="2ce2a-133">Acquérir le package :</span><span class="sxs-lookup"><span data-stu-id="2ce2a-133">Acquire the package:</span></span>
   - <span data-ttu-id="2ce2a-134">Déterminez si le package (en fonction du numéro de version et de l’identificateur précis) est déjà installé dans le dossier *global-packages*, comme l’explique la page [Gérer les dossiers de packages globaux et de cache](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-134">Check if the package (by exact identifer and version number) is already installed in the *global-packages* folder as described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

   - <span data-ttu-id="2ce2a-135">Si le package ne se trouve pas dans le dossier *global-packages*, tentez de le récupérer parmi les sources listées dans les [fichiers de configuration](Configuring-NuGet-Behavior.md).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-135">If the package is not in the *global-packages* folder, attempt to retrieve it from the sources listed listed in the [configuration files](Configuring-NuGet-Behavior.md).</span></span> <span data-ttu-id="2ce2a-136">Pour les sources en ligne, tentez tout d’abord de récupérer le package dans le cache, sauf si `-NoCache` est spécifié avec des commandes `nuget.exe`, ou `--no-cache` avec `dotnet restore`.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-136">For online sources, attempt first to retrieve the package from the cache unless `-NoCache` is specified with `nuget.exe` commands or `--no-cache` is specified with `dotnet restore`.</span></span> <span data-ttu-id="2ce2a-137">(Visual Studio et `dotnet add package` utilisent toujours le cache.) Si un package est utilisé à partir du cache, « CACHE » s’affiche en sortie.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-137">(Visual Studio and `dotnet add package` always use the cache.) If a package is used from the cache, "CACHE" appears in the output.</span></span> <span data-ttu-id="2ce2a-138">Le cache a un délai d’expiration de 30 minutes.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-138">The cache has an expiration time of 30 minutes.</span></span>

   - <span data-ttu-id="2ce2a-139">Si le package ne se trouve pas dans le cache, tentez de le télécharger parmi les sources listées dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-139">If the package is not in the cache, attempt to download it from the sources listed in the configuration.</span></span> <span data-ttu-id="2ce2a-140">Si un package est téléchargé, « GET » et « OK » apparaissent en sortie.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-140">If a package is downloaded, "GET" and "OK" appear in the output.</span></span>

   - <span data-ttu-id="2ce2a-141">Si aucune source ne permet de récupérer le package, l’installation échoue à ce stade, avec une erreur du type [NU1103](../reference/errors-and-warnings/NU1103.md).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-141">If the package cannot be successfully acquired from any sources, installation fails at this point with an error such as [NU1103](../reference/errors-and-warnings/NU1103.md).</span></span> <span data-ttu-id="2ce2a-142">Notez que les erreurs des commandes `nuget.exe` affichent uniquement la dernière source vérifiée, mais implique que le package n’était disponible dans aucune source.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-142">Note that errors from `nuget.exe` commands show only the last source checked, but implies that the package wasn't available from any source.</span></span>

   <span data-ttu-id="2ce2a-143">Lors de l’acquisition du package, l’ordre des sources de la configuration NuGet peut s’appliquer :</span><span class="sxs-lookup"><span data-stu-id="2ce2a-143">When acquiring the package, the order of sources in the NuGet configuration may apply:</span></span>

   - <span data-ttu-id="2ce2a-144">Pour les projets au format PackageReference, NuGet consulte les partages réseau et le dossier local de sources avant de parcourir les sources HTTP.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-144">For projects using the PackageReference format, NuGet checks sources local folder and network shares before checking HTTP sources.</span></span>

   - <span data-ttu-id="2ce2a-145">Dans le cas des projets utilisant le format de gestion `packages.config`, NuGet utilise l’ordre des sources de la configuration.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-145">For projects using the `packages.config` management format, NuGet uses the order of the sources in the configuration.</span></span> <span data-ttu-id="2ce2a-146">Les opérations de restauration font figure d’exception : l’ordre des sources est ignoré et NuGet utilise le package provenant de la première source à répondre.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-146">An exception is restore operations, in which case source ordering is ignored and NuGet uses the package from whichever source responds first.</span></span>

   - <span data-ttu-id="2ce2a-147">En règle générale, l’ordre dans lequel NuGet vérifie les sources n’est pas particulièrement explicite, car n’importe quel package donné avec un identificateur et un numéro de version spécifiques est exactement le même quelle que soit la source sur laquelle il est trouvé.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-147">In general, the order in which NuGet checks sources isn't particularly meaningful, because any given package with a specific identifier and version number is exactly the same on whatever source it's found.</span></span>

3. <span data-ttu-id="2ce2a-148">(Tous les outils à l’exception de `nuget.exe`) Enregistrez une copie du package et d’autres informations dans le dossier *http-cache*, comme l’explique la page [Gérer les dossiers de packages globaux et de cache](managing-the-global-packages-and-cache-folders.md).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-148">(All tools except `nuget.exe`) Save a copy of the package and other information in the *http-cache* folder as described on [Managing the global packages and cache folders](managing-the-global-packages-and-cache-folders.md).</span></span>

4. <span data-ttu-id="2ce2a-149">S’il a été téléchargé, installez le package dans le dossier *global-packages* de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-149">If downloaded, install the package into the per-user *global-packages* folder.</span></span> <span data-ttu-id="2ce2a-150">NuGet crée un sous-dossier par identificateur de package, puis un sous-dossier par version installée du package.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-150">NuGet creates a subfolder for each package identifier, then creates subfolders for each installed version of the package.</span></span>

5. <span data-ttu-id="2ce2a-151">Mettez à jour les dossiers et les fichiers projet :</span><span class="sxs-lookup"><span data-stu-id="2ce2a-151">Update other project files and folders:</span></span>

    - <span data-ttu-id="2ce2a-152">Pour les projets qui utilisent PackageReference, mettez à jour le graphique de dépendance de package stocké dans `obj/project.assets.json`.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-152">For projects using PackageReference, update the package dependency graph stored in `obj/project.assets.json`.</span></span> <span data-ttu-id="2ce2a-153">Le contenu des packages proprement dits n’est copié dans aucun dossier du projet.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-153">Package contents themselves are not copied into any project folder.</span></span>
    - <span data-ttu-id="2ce2a-154">Dans le cas des projets utilisant `packages.config`, copiez les parties du package développé qui correspondent à la version cible de .NET Framework du projet dans le dossier `packages` du projet.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-154">For projects using `packages.config`, copy those parts of the expanded package that match the project's target framework into project's `packages` folder.</span></span> <span data-ttu-id="2ce2a-155">(Si vous utilisez `nuget install`, l’ensemble du package développé est copié, car `nuget.exe` n’examine pas les fichiers projet pour identifier la version cible de .NET Framework.)</span><span class="sxs-lookup"><span data-stu-id="2ce2a-155">(When using `nuget install`, the entire expanded package is copied because `nuget.exe` does not examine project files to identify the target framework.)</span></span>
    - <span data-ttu-id="2ce2a-156">Mettez à jour `app.config` et/ou `web.config` si le package utilise des [transformations de fichiers config et source](../create-packages/source-and-config-file-transformations.md).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-156">Update `app.config` and/or `web.config` if the package uses [source and config file transformations](../create-packages/source-and-config-file-transformations.md).</span></span>

6. <span data-ttu-id="2ce2a-157">Installez toutes les dépendances de bas niveau qui ne sont pas déjà présentes dans le projet.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-157">Install any down-level dependencies if not already present in the project.</span></span> <span data-ttu-id="2ce2a-158">Ce processus est susceptible de mettre à jour les versions de package, comme l’explique la page [Résolution de dépendances](../consume-packages/dependency-resolution.md).</span><span class="sxs-lookup"><span data-stu-id="2ce2a-158">This process might update package versions in the process, as described in [Dependency Resolution](../consume-packages/dependency-resolution.md).</span></span>

7. <span data-ttu-id="2ce2a-159">(Visual Studio uniquement) Affichez le fichier Lisez-moi du package, le cas échéant, dans une fenêtre Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="2ce2a-159">(Visual Studio only) Display the package's readme file, if available, in a Visual Studio window.</span></span>

## <a name="related-articles"></a><span data-ttu-id="2ce2a-160">Articles connexes</span><span class="sxs-lookup"><span data-stu-id="2ce2a-160">Related articles</span></span>

- [<span data-ttu-id="2ce2a-161">Installation de packages signés</span><span class="sxs-lookup"><span data-stu-id="2ce2a-161">Installing signed packages</span></span>](installing-signed-packages.md)
- [<span data-ttu-id="2ce2a-162">Vue d’ensemble et flux de travail de consommation de package</span><span class="sxs-lookup"><span data-stu-id="2ce2a-162">Overview and workflow of package consumption</span></span>](../consume-packages/overview-and-workflow.md)
- [<span data-ttu-id="2ce2a-163">Recherche et sélection des packages</span><span class="sxs-lookup"><span data-stu-id="2ce2a-163">Finding and choosing packages</span></span>](../consume-packages/finding-and-choosing-packages.md)
- [<span data-ttu-id="2ce2a-164">Gérer les dossiers global-packages et cache NuGet</span><span class="sxs-lookup"><span data-stu-id="2ce2a-164">Managing the NuGet cache and global-packages folders</span></span>](managing-the-global-packages-and-cache-folders.md)
- [<span data-ttu-id="2ce2a-165">Configuration du comportement de NuGet</span><span class="sxs-lookup"><span data-stu-id="2ce2a-165">Configuring NuGet behavior</span></span>](../consume-packages/configuring-nuget-behavior.md)
